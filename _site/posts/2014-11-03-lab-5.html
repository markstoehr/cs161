<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>CS161 Labs - Lab 5: More Haskell Calculators</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
	<link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">CS161 Labs</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Lab 5: More Haskell Calculators</h1>

            <div class="info">
    Posted on November  3, 2014
    
</div>

<p>We shall additionally be adding in rational numbers. An input expression might look like:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">&gt;</span> <span class="dv">1</span><span class="fu">/</span><span class="dv">9</span> <span class="fu">+</span> <span class="fu">-</span><span class="dv">7</span><span class="fu">/-</span><span class="dv">8</span> <span class="fu">*</span> <span class="fu">-</span><span class="dv">51</span><span class="fu">/</span><span class="dv">33</span></code></pre>
<ol style="list-style-type: decimal">
<li>Design a data type similar to <code>ArithExpr</code> which has a rational numbers. Call it <code>RArithExpr</code>, include the possibility of having integers.</li>
</ol>
In order to work with rational expressions you’ll need to be able to read them in. There are many ways to write the same rational number since
<center>
<br /><span class="math">$$\frac{a}{b} = \frac{ka}{kb}$$</span><br />
</center>
<p>so in reading you’ll likely want to ensure that you use the smallest base. There is a very old, efficient algorithm for computing the base of a fraction in lowest terms that follows from the observations:</p>
<ul>
<li>For a positive fraction <br /><span class="math">$$\frac{a}{b}$$</span><br /> there is a unique integer <span class="math"><em>q</em></span> such that <span class="math"><em>b</em> = <em>q</em> ⋅ <em>a</em> + <em>r</em></span> where <span class="math">0 ≤ <em>r</em> &lt; <em>b</em></span></li>
<li>If another integer <span class="math"><em>k</em></span> divides <span class="math"><em>a</em></span> and divides <span class="math"><em>b</em></span> then <span class="math"><em>k</em></span> divides <span class="math"><em>b</em> − <em>q</em> ⋅ <em>a</em> = <em>r</em></span>.</li>
</ul>
<p>The trick is to use recursion.</p>
<ol start="2" style="list-style-type: decimal">
<li>Implement a recursive algorithm to take two integers and create a fraction in lowest terms from those two integers. Using that function create a parser that accepts a string of the form “91/14” or “107/-31” or “-22/3” and outputs an <code>RArithExpr</code>.</li>
</ol>
<h2 id="arithmetic-with-rational-numbers">Arithmetic with rational numbers</h2>
<p>Adding rational numbers requires thinking about the bases of the two rational numbers again. In particular when adding <br /><span class="math">$$ \frac{a}{b} + \frac{c}{d} $$</span><br /> the base of the result will be the least common multiple of <span class="math"><em>b</em></span> and <span class="math"><em>d</em></span>. Fortunately, with a small tweak this can be computed using the function designed in exercise 3. Assume that division <code>/</code> is more tightly binding than <code>+</code> or <code>*</code>. So <code>2+5/3</code> should be <code>11/3</code>.</p>
<ol start="3" style="list-style-type: decimal">
<li>Implement a function for adding rational numbers together that preserves their being in lowest form. Add a test to ensure that your function works correctly.</li>
</ol>
<p>Multipling rational numbers is straightforward:</p>
<ol start="4" style="list-style-type: decimal">
<li>Implement multiplication for rational numbers and add in a test that it works.</li>
</ol>
<h2 id="including-variables">Including Variables</h2>
<p>We construct a type <code>VRArithExpr</code> which will also allow variables.</p>
<ol start="5" style="list-style-type: decimal">
<li>Implement <code>VRArithExpr</code> to include variables. Variables need to be able to be added and multiplied together. The basic data associated with a variable should be a string for the variable name.</li>
</ol>
<p>We need to be able to parse a string into variables. This will require some cleverness with <code>takeWhile</code> and <code>dropWhile</code>.</p>
<ol start="6" style="list-style-type: decimal">
<li>Write a function to parse strings similar to “7/8 * x” into <code>VRArithExpr</code>. We do not allow division to directly take place on variables.</li>
</ol>
<h2 id="implementing-collect">Implementing Collect</h2>
<p>If we want to display the expressions in a succinct manner. We need an operator that will put like terms with like terms so we don’t display <code>13*x + 5*x</code> but rather <code>15*x</code>.</p>
<ol start="7" style="list-style-type: decimal">
<li>Implement a <code>collect</code> function which takes <code>VRArithExpr</code> and outputs a <code>PolyExpr</code> where <code>PolyExpr</code> is a data structure that represents an expression with variables in lowest terms so that all you have are variables, their coefficients, their powers, and the constant term. It is up to you to design this expression. Doing so will require another algebraic data type but you can often implement things using the original <code>eval</code> function.</li>
</ol>
<p>Once you have a <code>collect</code> expression you should be able to pretty-print the input expression. Pretty-print here means showing the polynomial expanded into individual terms (no need to worry about factorization). So something like this: <code>2*x+5/3*y^2 + x*y</code>.</p>
<ol start="8" style="list-style-type: decimal">
<li>Print the expression back to the user in a pretty-print form. Include some tests that this works. You will want to treat <code>x*y</code> the same as <code>y*x</code> so you should have some data type that represents a product of variables and keeps the product of variables sorted so that way you can collect easily and find like terms. A useful function is <code>sortBy</code> and using <code>ord</code> you can implement a lexicographic ordering over strings. You will find that strings by default have a lexicographic ordering. You may assume variable are all lower-case characters.</li>
</ol>
<h2 id="extra-credit">Extra Credit</h2>
<ol start="9" style="list-style-type: decimal">
<li>Make all of the above work but with parentheses. Allow division between variables.</li>
</ol>
<h2 id="what-to-turn-in">What to turn in</h2>
<p>This lab should be saved to a <code>lab5</code> folder with a <code>README</code> and a <code>lab5.hs</code>.</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
